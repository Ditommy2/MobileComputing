local composer = require( "composer" )
local lunghezza =  display.contentWidth
local altezza=  lunghezza*(9/16)

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--Variabili nemico
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local enemy
local scene
local animationTimer
local sprite_sheet
local sheet_Options

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--Sequenze nemico
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local sequences =
{
    --Right walking sequence
    {
        name = "idle",
        start = 1,
        count = 37,
        time = 1000,
        loopCount = 0,
        loopDirection = "forward"
    }
}

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--Creazione nemico
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local function create(scena, nemico)
  --Memorizing scene context
  scene = scena

  --Opzioni di visualizzazione nemico
  local sheet_Options =
  {
    width=nemico.width,  --119
    height=nemico.height, --160
    numFrames=37,
  }

  --Display nemico
  sprite_sheet = graphics.newImageSheet( nemico.immagine, sheet_Options )
  enemy = display.newSprite( sprite_sheet, sequences )
  enemy:setSequence(idle)
  enemy:play()

  --Posizionamento nemico 
  enemy.anchorY = 1
  enemy.x = lunghezza * 0.7
  enemy.y = altezza-313
  enemy.myName = "Enemy"


  return enemy
end

----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
--Interface enemy
----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
local interfaceEnemy =
{
  createEnemy = (create),
}

return interfaceEnemy
